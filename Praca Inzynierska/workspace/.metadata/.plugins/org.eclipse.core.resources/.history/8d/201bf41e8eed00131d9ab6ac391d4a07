package test.parser;


import main.parser.Expression;
import main.parser.ExpressionParser;
import main.parser.LinguisticOperatorsSet;
import main.parser.StandardMathOperatorsSet;
import main.parser.exceptions.ExecutionException;
import main.parser.exceptions.ExpressionParsingException;
import main.parser.exceptions.InvalidArgumentsException;
import main.parser.variables.Variable;
import main.parser.variables.VariableList;

import org.junit.Test;

public class ExpressionParserTest {
	public static void main (String []args) {};
	@Test
	public void test() throws InvalidArgumentsException, ExpressionParsingException, ExecutionException {
		ExpressionParser p = new ExpressionParser();
		VariableList v = new VariableList();
		
		//p.setVariableList(v);
		p.setOperatorsSet(new LinguisticOperatorsSet()); //operators 
		p.addVariable(new Variable("temperatura", "niska"));
		p.addVariable(new Variable("wilgotnosc", "wysoka"));
		p.addVariable(new Variable("wys", "2"));
		p.addVariable(new Variable("wys1", "9"));
		Expression e = p.createExpression("if not temperatura is wysoka and not false then display "
				+ "\'rules must be obey\' and temperatura=wysoka ; wilgotnosc=srednia");
		String res = (String) p.exe(null);
		
		System.out.println("'" + res + "'");
		
		System.out.println("'" + p.getVariables().valueOf("temperatura") + "'");
		res = (String) e.exe();
		System.out.println("'" + res + "'");
		System.out.println("'" + p.getVariables().valueOf("wilgotnosc") + "'");
		System.out.println("'" + p.getVariables().valueOf("temperatura") + "'");
		p.setOperatorsSet(new StandardMathOperatorsSet ());
		double s =(Double)p.createExpression("a=2+3*5^2#2+3(^sin(4))").exe();
		System.out.println (s);
	}	
}
